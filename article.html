<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manuscript | Whallop & Co.</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="midnight-mode">

<nav>
  <a href="index.html" class="logo">WHALLOP & CO.</a>
  <div class="nav-links">
    <a href="index.html">Back to Archive</a>
    <button id="theme-toggle" onclick="toggleTheme()">Switch Mode</button>
  </div>
</nav>

<div class="feed" id="article-content" style="margin-top: 50px;">
  </div>

<footer>
  <div class="footer-left">© 2026 WHALLOP & CO.</div>
  <div class="footer-right">
    <a href="stocksummary.html">STOCK DRAFT</a>
    <a href="contact.html">CONTACT</a>
  </div>
</footer>

<script src="js/theme.js"></script>
<script>
async function loadSingleArticle() {
  const params = new URLSearchParams(window.location.search);
  const articleId = params.get('id');

  const response = await fetch('data/content.json');
  const works = await response.json();
  
  // Find the work by the URL ID
  const work = works.find(w => w.title.replace(/\s+/g, '-').toLowerCase() === articleId);

  if (work) {
    document.title = `${work.title} | Whallop & Co.`;
    const container = document.getElementById('article-content');
    
    let displayContent = "";

    // Check if the content is a path to a PDF
    if (work.content.endsWith('.pdf')) {
      displayContent = `
        <div class="pdf-container" style="width: 100%; height: 80vh; margin-top: 30px;">
          <embed src="${work.content}" type="application/pdf" width="100%" height="100%" />
          <p style="text-align: center; margin-top: 15px;">
            <a href="${work.content}" target="_blank" class="btn-read">Open PDF in New Tab</a>
          </p>
        </div>`;
    } else {
      // Standard text/HTML rendering
      displayContent = work.type === 'poem' 
        ? `<div class="poetry-block">${work.content}</div>`
        : `<div class="essay-body">${work.content}</div>`;
    }

    container.innerHTML = `
      <span class="metadata">${work.date} • ${work.category.toUpperCase()}</span>
      <h1>${work.title}</h1>
      <div class="byline">By ${work.author}</div>
      ${displayContent}
    `;
  }
}
  loadSingleArticle();
</script>
</body>
</html>